{% extends 'core/base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}

<div class="container-fluid">
  <h1 class="text-center">Actualiza tus datos</h1>

  <form id="form" method="POST" enctype="multipart/form-data" class="d-flex flex-column align-items-center">

    {% csrf_token %}

    <div class="row w-100 justify-content-center">
      <div class="col-sm-12 col-md-4">
        {{ form_usuario|as_bootstrap_form }}
      </div>

      <!-- AREA DE DATOS DE PERFIL: rut, direcciÃ³n y subscrito (VER COMENTARIO "CHECKBOX SUBSCRITO" en script.js) -->
      <div class="col-sm-12 col-md-3">
        {{ form_perfil|as_bootstrap_form }}
      </div>
      
      <!-- AREA DE IMAGEN DE PERFIL -->
      <div class="col-sm-12 col-md-3 text-center">
        <div class="row justify-content-center">
          <!-- AREA DE CUADRO DE IMAGEN: Muestra la Imagen de perfil -->
          <div class="col-sm-12" style="height: 220px">
            <img id="cuadro-imagen" 
                 src="{% if request.user.perfil.imagen %}{{ request.user.perfil.imagen.url }}{% else %}{% static 'core/img/sin-imagen.png' %}{% endif %}" 
                 style="max-height: 100%; max-width: 100%;">
          </div>
          <!-- INPUT DE IMAGEN -->
        </div>
      </div>
    </div>

    <!-- AREA DE BOTONES -->
    <div class="mt-2 text-center">
      <button type="submit" class="btn btn-primary">Actualizar mis datos</button>
      <button class="btn btn-primary" onclick="event.preventDefault(); document.getElementById('id_imagen').click();"> Seleccionar imagen </button>  
    </div>

  </form>
</div>

{% endblock content %}
